<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amigo Secreto â€” Your Game</title>
  <style>
    :root {
      --primary: #6a4df5;
      --primary-dark: #4d34c3;
      --bg: #1a1a2e;
      --card-bg: #262659;
      --text-light: #f0f0f5;
      --accent: #ff6584;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text-light);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .game-container {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      width: 90%;
      max-width: 450px;
      text-align: center;
    }
    h1 {
      margin: 0 0 20px;
      font-size: 2rem;
      color: var(--accent);
    }
    #nome {
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      border: none;
      border-radius: 12px;
      outline: none;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
      transition: transform 0.2s;
      margin-bottom: 20px;
    }
    #nome:focus {
      transform: scale(1.02);
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
    }
    .lista {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .card {
      background: var(--primary);
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: bold;
      color: var(--text-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.2s, background 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
      background: var(--primary-dark);
    }
    .remove-btn {
      background: transparent;
      border: none;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      margin-left: 8px;
      transition: color 0.3s;
    }
    .remove-btn:hover {
      color: #ffbaba;
    }
    .buttons {
      margin-top: 25px;
      display: flex;
      justify-content: space-between;
    }
    button {
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
      color: var(--text-light);
      background: var(--accent);
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background: #ff456e;
      transform: scale(1.05);
    }
    #resultado {
      margin-top: 20px;
      font-size: 1.3rem;
      color: #4ee9ff;
      opacity: 0;
      transition: opacity 0.8s;
      min-height: 1.5em;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>Amigo Secreto ðŸŽ®</h1>
    <input type="text" id="nome" placeholder="Digite o nome e pressione Enter" autocomplete="off" />
    <div class="lista" id="listaNomes"></div>
    <div class="buttons">
      <button id="sortearBtn">Sortear</button>
      <button id="resetarBtn">RecomeÃ§ar</button>
    </div>
    <div id="resultado"></div>
  </div>

  <script>
    const nomes = [];
    const inputNome = document.getElementById('nome');
    const listaNomesEl = document.getElementById('listaNomes');
    const resultadoEl = document.getElementById('resultado');
    const sortearBtn = document.getElementById('sortearBtn');
    const resetarBtn = document.getElementById('resetarBtn');

    function atualizarLista() {
      listaNomesEl.innerHTML = '';
      nomes.forEach((n, i) => {
        const card = document.createElement('div');
        card.className = 'card';

        const span = document.createElement('span');
        span.textContent = n;

        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.textContent = 'X';
        removeBtn.onclick = () => {
          nomes.splice(i, 1);
          atualizarLista();
        };

        card.appendChild(span);
        card.appendChild(removeBtn);
        listaNomesEl.appendChild(card);
      });
    }

    inputNome.addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        const valor = inputNome.value.trim();
        if (!valor) {
          alert('Digite um nome vÃ¡lido!');
        } else if (nomes.includes(valor)) {
          alert('Esse nome jÃ¡ foi adicionado!');
        } else {
          nomes.push(valor);
          inputNome.value = '';
          atualizarLista();
          resultadoEl.style.opacity = 0;
        }
      }
    });

    sortearBtn.addEventListener('click', function() {
      if (nomes.length < 2) {
        alert('Adicione pelo menos 2 participantes para sortear!');
        return;
      }
      resultadoEl.style.opacity = 0;
      setTimeout(() => {
        let embaralhados = [...nomes];
        for (let i = embaralhados.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          [embaralhados[i], embaralhados[j]] = [embaralhados[j], embaralhados[i]];
        }
        let valido = true;
        for (let i = 0; i < nomes.length; i++) {
          if (nomes[i] === embaralhados[i]) {
            valido = false;
            break;
          }
        }
        if (valido) {
          let resultado = "Resultado do Sorteio:\n";
          for (let i = 0; i < nomes.length; i++) {
            resultado += `${nomes[i]} tirou ${embaralhados[(i + 1) % nomes.length]}\n`;
          }
          resultadoEl.textContent = resultado;
          resultadoEl.style.opacity = 1;
        } else {
          sortearBtn.click(); // Tenta de novo se invÃ¡lido
        }
      }, 500);
    });

    resetarBtn.addEventListener('click', function() {
      nomes.length = 0;
      atualizarLista();
      resultadoEl.textContent = '';
      resultadoEl.style.opacity = 0;
      inputNome.value = '';
      inputNome.focus();
    });
  </script>
</body>
</html>